<!DOCTYPE html>
<html xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <title>Test console</title>
</head>
<body>
<h3>Hello! This is the test console!</h3>
<label for="console"></label>
<textarea id="console" disabled="disabled" th:text="${consoleText}" style="height: 200px; width: 900px;"></textarea>
<form method="post">
    <label for="userId">Enter user id:</label>
    <input type="text" name="userId" id="userId" th:value="${userId}" autocomplete="off">
    <br>
    <label for="message">Enter message:</label>
    <input type="text" name="message" id="message" autocomplete="off">
    <br>
    <input type="submit" value="Send message">
</form>

<script>
        // Restore form input values from local storage when the page loads
        document.addEventListener('DOMContentLoaded', function() {
            var userIdInput = document.getElementById('userId');

            userIdInput.value = localStorage.getItem('userIdInputValue') || '';

            // Add input event listeners to save the input values to local storage
            userIdInput.addEventListener('input', function() {
                localStorage.setItem('userIdInputValue', userIdInput.value);
            });

        });
        // Function to periodically update the textarea with data from the server
        function updateConsoleText() {
            // Make an AJAX request to the server to fetch the updated console text
            fetch('/fetch-console-text')
                .then(response => response.text())
                .then(data => {
                    // Update the textarea with the fetched text
                    document.getElementById('console').value = data;
                })
                .catch(error => console.error('Error:', error));
        }

        // Update the textarea every 2 seconds (you can adjust the interval as needed)
        setInterval(updateConsoleText, 2000);
    </script>
</body>
</html>
